<apex:page standardController="Account" extensions="RecordPDFController" showHeader="true" sidebar="false">
  <apex:form >
    <apex:pageBlock title="Send Account PDF" mode="edit">
      <apex:pageMessages />

      <apex:pageBlockSection columns="1">
        <apex:outputLabel value="Send PDF to:" style="font-weight:bold; display:block; margin-bottom:6px;"/>
        <apex:selectRadio value="{!recipientType}">
          <apex:selectOption itemValue="Owner" itemLabel="Account Owner (default)"/>
          <apex:selectOption itemValue="Contact" itemLabel="Select a Contact on this Account"/>
          <apex:selectOption itemValue="Other" itemLabel="Enter an email address"/>
          <apex:actionSupport event="onchange" reRender="contactPanel,otherPanel,messagesPanel" />
        </apex:selectRadio>

        <apex:outputPanel id="messagesPanel">
          <apex:pageMessages />
        </apex:outputPanel>

        <apex:outputPanel id="contactPanel" layout="block" rendered="{!recipientType=='Contact'}" style="margin-top:8px;">
          <apex:outputLabel value="Contact" for="contactSelect" />
          <apex:selectList id="contactSelect" value="{!selectedContactId}" size="1" style="width: 420px;">
            <apex:selectOptions value="{!contactOptions}" />
          </apex:selectList>
        </apex:outputPanel>

<apex:outputPanel id="otherPanel" layout="block" rendered="{!recipientType=='Other'}" style="margin-top:8px;">
    <apex:outputLabel value="Email address" for="otherEmail" />
    <apex:inputText id="otherEmail" value="{!otherEmail}" style="width: 420px;" />
    <apex:outputText value="Please enter a valid email address (e.g., example@example.com)" style="color:gray; font-size:12px;" />
</apex:outputPanel>


        <apex:outputLabel value="Subject" for="subject" style="margin-top:8px;"/>
        <apex:inputText id="subject" value="{!subject}" style="width: 100%;"/>

        <apex:outputLabel value="Message" for="body" style="margin-top:6px;"/>
        <apex:inputTextarea id="body" value="{!body}" style="width: 100%;" rows="4"/>

      </apex:pageBlockSection>

      <apex:pageBlockButtons >
        <apex:commandButton value="Send" action="{!sendEmail}" />
        <apex:commandButton value="Cancel" action="{!cancelAction}" immediate="true" />
      </apex:pageBlockButtons>
    </apex:pageBlock>
  </apex:form>
</apex:page>
